import{G as t}from"./p-f40fc6b9.js";export{G as GESTURE_CONTROLLER}from"./p-f40fc6b9.js";const e=(t,e,r,s)=>{const n=o(t)?{capture:!!s.capture,passive:!!s.passive}:!!s.capture;let i,c;return t.__zone_symbol__addEventListener?(i="__zone_symbol__addEventListener",c="__zone_symbol__removeEventListener"):(i="addEventListener",c="removeEventListener"),t[i](e,r,n),()=>{t[c](e,r,n)}},o=t=>{if(void 0===r)try{const e=Object.defineProperty({},"passive",{get:()=>{r=!0}});t.addEventListener("optsTest",()=>{},e)}catch(t){r=!1}return!!r};let r;const s=t=>t instanceof Document?t:t.ownerDocument,n=o=>{let r=!1,n=!1,d=!0,u=!1;const l=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},o),v=l.canStart,m=l.onWillStart,p=l.onStart,f=l.onEnd,_=l.notCaptured,b=l.onMove,h=l.threshold,y={type:"pan",startX:0,startY:0,startTimeStamp:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,timeStamp:0,event:void 0,data:void 0},D=((t,e,o)=>{const r=o*(Math.PI/180),s="x"===t,n=Math.cos(r),i=e*e;let c=0,a=0,d=!1,u=0;return{start(t,e){c=t,a=e,u=0,d=!0},detect(t,e){if(!d)return!1;const o=t-c,r=e-a,l=o*o+r*r;if(l<i)return!1;const v=Math.sqrt(l),m=(s?o:r)/v;return u=m>n?1:m<-n?-1:0,d=!1,!0},isGesture:()=>0!==u,getDirection:()=>u}})(l.direction,l.threshold,l.maxAngle),E=t.createGesture({name:o.gestureName,priority:o.gesturePriority,disableScroll:o.disableScroll}),L=()=>{r&&(u=!1,b&&b(y))},x=()=>!(E&&!E.capture()||(r=!0,d=!1,y.startX=y.currentX,y.startY=y.currentY,y.startTimeStamp=y.timeStamp,m?m(y).then(S):S(),0)),S=()=>{p&&p(y),d=!0},g=()=>{r=!1,n=!1,u=!1,d=!0,E.release()},j=t=>{const e=r,o=d;g(),o&&(i(y,t),e?f&&f(y):_&&_(y))},G=((t,o,r,n,i)=>{let c,a,d,u,l,v,m,p=0;const f=s=>{p=Date.now()+2e3,o(s)&&(!a&&r&&(a=e(t,"touchmove",r,i)),d||(d=e(t,"touchend",b,i)),u||(u=e(t,"touchcancel",b,i)))},_=n=>{p>Date.now()||o(n)&&(!v&&r&&(v=e(s(t),"mousemove",r,i)),m||(m=e(s(t),"mouseup",h,i)))},b=t=>{y(),n&&n(t)},h=t=>{D(),n&&n(t)},y=()=>{a&&a(),d&&d(),u&&u(),a=d=u=void 0},D=()=>{v&&v(),m&&m(),v=m=void 0},E=()=>{y(),D()},L=o=>{o?(c&&c(),l&&l(),c=l=void 0,E()):(c||(c=e(t,"touchstart",f,i)),l||(l=e(t,"mousedown",_,i)))};return{setDisabled:L,stop:E,destroy:()=>{L(!0),n=r=o=void 0}}})(l.el,t=>{const e=a(t);return!(n||!d)&&(c(t,y),y.startX=y.currentX,y.startY=y.currentY,y.startTimeStamp=y.timeStamp=e,y.velocityX=y.velocityY=y.deltaX=y.deltaY=0,y.event=t,(!v||!1!==v(y))&&(E.release(),!!E.start()&&(n=!0,0===h?x():(D.start(y.startX,y.startY),!0))))},t=>{r?!u&&d&&(u=!0,i(y,t),requestAnimationFrame(L)):(i(y,t),D.detect(y.currentX,y.currentY)&&(D.isGesture()&&x()||O()))},j,{capture:!1}),O=()=>{g(),G.stop(),_&&_(y)};return{setDisabled(t){t&&r&&j(void 0),G.setDisabled(t)},destroy(){E.destroy(),G.destroy()}}},i=(t,e)=>{if(!e)return;const o=t.currentX,r=t.currentY,s=t.timeStamp;c(e,t);const n=t.currentX,i=t.currentY,d=(t.timeStamp=a(e))-s;if(d>0&&d<100){const e=(i-r)/d;t.velocityX=(n-o)/d*.7+.3*t.velocityX,t.velocityY=.7*e+.3*t.velocityY}t.deltaX=n-t.startX,t.deltaY=i-t.startY,t.event=e},c=(t,e)=>{let o=0,r=0;if(t){const e=t.changedTouches;if(e&&e.length>0){const t=e[0];o=t.clientX,r=t.clientY}else void 0!==t.pageX&&(o=t.pageX,r=t.pageY)}e.currentX=o,e.currentY=r},a=t=>t.timeStamp||Date.now();export{n as createGesture}